{% extends "base.html" %}
{% block title %}My Tests{% endblock %}

{% block content %}
<h2>📘 My Test Results</h2>

{% if submissions %}
  <table style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="background-color: #f2f2f2;">
        <th style="padding: 10px; border: 1px solid #ccc;">Subject</th>
        <th style="padding: 10px; border: 1px solid #ccc;">Test Title</th>
        <th style="padding: 10px; border: 1px solid #ccc;">Date</th>
        <th style="padding: 10px; border: 1px solid #ccc;">Status</th>
        <th style="padding: 10px; border: 1px solid #ccc;">Grade</th>
      </tr>
    </thead>
    <tbody>
      {% for submission in submissions %}
        <tr>
          <td style="padding: 10px; border: 1px solid #eee;">
            {{ submission.test.subject.name }}
          </td>
          <td style="padding: 10px; border: 1px solid #eee;">
            {{ submission.test.title }}
          </td>
          <td style="padding: 10px; border: 1px solid #eee;">
            {{ submission.test.date|date:"Y-m-d" }}
          </td>
          <td style="padding: 10px; border: 1px solid #eee;">
            {% if submission.is_graded %}
              <span style="color: green;">✔ Graded</span>
            {% else %}
              <span style="color: orange;">⏳ Pending</span>
            {% endif %}
          </td>
          <td style="padding: 10px; border: 1px solid #eee;">
            {% if submission.is_graded %}
              {{ submission.grade|floatformat:2 }}%
            {% else %}
              -
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>You haven't written any tests yet.</p>
{% endif %}
{% endblock %}
